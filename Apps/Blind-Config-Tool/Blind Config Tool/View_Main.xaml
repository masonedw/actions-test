<Window x:Class="Blind_Config_Tool.View_Main"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Blind_Config_Tool"
        xmlns:ViewModel="clr-namespace:Blind_Config_Tool.RedesignFiles.MVVM"
        mc:Ignorable="d"
        Title="Device Configurator Tool (FAP)" 
        SizeToContent="WidthAndHeight"
        ResizeMode="CanMinimize">

    <Window.DataContext>
        <ViewModel:VM_Main/>
    </Window.DataContext>

    <Window.Resources>
        <Storyboard x:Key="DisplayErrorBox">
            <DoubleAnimation Storyboard.TargetName="ErrorBox"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="0"
                             To="60"
                             Duration="0:0:1">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="HideErrorBox">
            <DoubleAnimation Storyboard.TargetName="ErrorBox"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="60"
                             To="-1000"
                             Duration="0:0:10">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>

    <Border>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="1*"/>
                <RowDefinition Height="50"/>
            </Grid.RowDefinitions>

            <ContentControl Grid.Row="1"
                            Content="{Binding CurrentView}"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Height="740"
                            Width="920" Grid.ColumnSpan="2"/>

            <Border Name="ErrorBox"
                    BorderThickness="4,0,4,4"
                    BorderBrush="Orange"
                    Background="White"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Grid.Row="0"
                    Grid.RowSpan="2"
                    Height="Auto"
                    Width="350"
                    VerticalAlignment="Top"
                    Margin="0,0,0,0"
                    CornerRadius="0,0,10,10">
                <Border.RenderTransform>
                    <TranslateTransform x:Name="TranslateTransform"/>
                </Border.RenderTransform>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="1*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="30"/>
                    </Grid.ColumnDefinitions>

                    <Button Content="X"
                            Grid.Column="2"
                            Grid.Row="0"
                            Height="25"
                            Width="25"
                            Command="{Binding HideError}"
                            Style="{StaticResource StandardButton_Style}"/>

                    <Label x:Name="ErrorBoxTitle"
                           Content="Error Message Title"
                           Grid.Row="0"
                           Grid.Column="1"
                           FontSize="16"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"/>

                    <Label Grid.Row="1"
                           Grid.Column="1"
                           HorizontalAlignment="Center" 
                           HorizontalContentAlignment="Center"
                           VerticalAlignment="Top"
                           Width="250">
                        <TextBlock x:Name="ErrorBoxCaption"
                                   TextWrapping="Wrap"
                                   Text="Error caption"/>
                    </Label>
                </Grid>
            </Border>
            <Border Style="{StaticResource Banner1}" Grid.ColumnSpan="2">
                <Grid>
                    <StackPanel Orientation="Horizontal"
                                Grid.Row="0"
                                Grid.RowSpan="2"
                                Margin="10,0,0,0">
                        <Button Command="{Binding SelectMotorPage}"
                                HorizontalAlignment="Left"
                                Style="{StaticResource Button_NavigationTab}"
                                Background="{Binding MotorButtonColour}">
                            <StackPanel Orientation="Vertical"
                                        Margin="0,0,0,0">
                                <Image Source="Images/Motor.png"
                                    Height="40"
                                       Margin="0,0,0,0"/>
                                <TextBlock Foreground="White"
                                           Text="Motors"
                                           FontWeight="Bold"
                                           FontSize="12"
                                           Margin="0,-5,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button Command="{Binding SelectKeypadPage}"
                                HorizontalAlignment="Left"
                                Style="{StaticResource Button_NavigationTab}"
                                Background="{Binding KeypadButtonColour}"
                                Margin="-2,0,0,0">
                            <StackPanel Orientation="Vertical"
                                        Margin="0,5,0,0">
                                <Image Source="Images/Keypad.png"
                                    Height="30"
                                       Margin="0,0,0,0"/>
                                <TextBlock Foreground="White"
                                           Text="Keypads"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button Grid.Row="0"
                                Grid.RowSpan="2"
                                Style="{StaticResource Button_NavigationTab}"
                                Command="{Binding SelectSettingsPage}"
                                Background="{Binding SettingsButtonColour}"
                                HorizontalAlignment="Left"
                                Margin="-2,0,0,0">
                            <StackPanel Orientation="Vertical"
                                        Margin="0,0,0,0">
                                <Image Source="Images/Settings.png"
                                    Height="35"/>
                                <TextBlock Foreground="White"
                                           Text="Settings"
                                           FontWeight="Bold"
                                           FontSize="12"
                                           Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <Image Source="Images/Logo Centered - White.png"
                           Grid.RowSpan="2"
                           Height="45"
                           HorizontalAlignment="Right"
                           Margin="0,0,20,0"/>
                </Grid>
            </Border>

            <Border Style="{StaticResource Banner1}"
                    Grid.Row="2" Grid.ColumnSpan="2">
                <Grid>
                    <StackPanel Orientation="Horizontal"
                                Margin="10,0,0,0">
                        <!--<Button Command="{Binding ConnectToSerial}"
                                Style="{StaticResource Button_FooterConnect}"
                                Content="{Binding ConnectButtonText, FallbackValue='Connect'}"/>
-->
                        <Image HorizontalAlignment="Left" 
                           Height="20" 
                           Margin="15,0,0,0" 
                           Source="{Binding ConnectionStatusImageSource, FallbackValue='Images/Connect.png'}"
                           VerticalAlignment="Center"
                           Width="20"
                           Grid.Column="0"/>

                        <Label Content="{Binding ConnectionStatusLabel}"
                           Foreground="White"
                           Grid.Column="1"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Left"
                           VerticalContentAlignment="Center"/>
                    </StackPanel>

                    <Label Foreground="White"
                           Content="{Binding CommandDescription, FallbackValue='Done!'}"
                           FontSize="12"
                           Height="25"
                           Width="400"
                           HorizontalContentAlignment="Right"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           VerticalContentAlignment="Center"
                           Margin="0,0,15,0"
                           Grid.Column="2"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>